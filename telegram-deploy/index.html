<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Block Dropping Merge</title>
    
    <!-- Telegram Web App Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/game.css?v=5">
    <link rel="stylesheet" href="styles/leaderboard.css?v=5">
    
    <!-- Meta tags for Telegram -->
    <meta name="description" content="–£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞-–≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ —Å –ø–∞–¥–∞—é—â–∏–º–∏ –±–ª–æ–∫–∞–º–∏">
    <meta name="theme-color" content="#2c3e50">
    <meta name="background-color" content="#34495e">
    
    <!-- Cache busting -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Force reload scripts -->
    <script>
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞–µ–º –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
        if ('caches' in window) {
            caches.keys().then(function(names) {
                names.forEach(function(name) {
                    caches.delete(name);
                });
            });
        }
    </script>
    
    <!-- Disable zoom and touch behaviors -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div id="app">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="top-panel">
            <div class="stats">
                <div class="crown-score">
                    <span class="crown">üëë</span>
                    <span id="best-score">0</span>
                </div>
                <div class="coins">
                    <span class="coin">ü™ô</span>
                    <span id="coins">320</span>
                </div>
            </div>
            <div class="current-score" id="current-score">0</div>
            <div class="social">
                <span class="globe">üåê</span>
                <span class="users">üë•</span>
            </div>
        </div>

        <!-- –û—á–µ—Ä–µ–¥—å —Å–ª–µ–¥—É—é—â–∏—Ö –±–ª–æ–∫–æ–≤ -->
        <div class="next-blocks">
            <div class="next-block" id="next-1">2</div>
            <div class="next-block" id="next-2">4</div>
            <div class="next-block" id="next-3">2</div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
        <div class="game-container">
            <canvas id="game-canvas" width="370" height="470"></canvas>
            <div class="game-overlay" id="game-overlay">
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö -->
            </div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –∫–Ω–æ–ø–∫–∞–º–∏ -->
        <div class="bottom-panel">
            <button class="booster-btn" id="restart-btn">üîÑ</button>
            <button class="booster-btn" id="pause-btn">‚è∏Ô∏è</button>
            <button class="booster-btn coins-btn" id="bomb-btn">
                <span class="bomb">üí£</span>
                <span class="cost">150</span>
            </button>
            <button class="booster-btn coins-btn" id="hammer-btn">
                <span class="hammer">üî®</span>
                <span class="cost">100</span>
            </button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="achievement-modal">
        <div class="modal-content">
            <h2>–ü–æ—Ç—Ä—è—Å–∞—é—â–µ!</h2>
            <p>–í—ã —Å–æ–∑–¥–∞–ª–∏ –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ!</p>
            <div class="achievement-blocks">
                <div class="block-display" id="achieved-block">512</div>
            </div>
            <button class="claim-btn" id="claim-reward">
                ü™ô 20 –ü–æ–ª—É—á–∏—Ç—å
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/game.js?v=5"></script>
    <script src="js/telegram.js?v=5"></script>
    <script src="js/leaderboard.js?v=5"></script>
    
    <!-- Service Worker for PWA - TEMPORARILY DISABLED -->
    <script>
        if ('serviceWorker' in navigator) {
            // –û—Ç–∫–ª—é—á–∞–µ–º Service Worker –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                }
            });
        }
    </script>
</body>
</html>